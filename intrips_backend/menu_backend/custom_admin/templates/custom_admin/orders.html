{% extends 'custom_admin/base.html' %}

{% block content %}
    <h2 class="page-title">üìã –ó–∞–∫–∞–∑—ã —Å —Å–∞–π—Ç–∞</h2>

    <table class="styled-table mb-5 ">
        <thead  class="orders__thead bg-black bg-dark">
            <tr  class="orders__thead">
                <th>ID</th>
                <th>–î–∞—Ç–∞</th>
                <th>–í—Ä–µ–º—è</th>
                <th>–ù–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã</th>
                <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</th>
                <th>–¢–æ–≤–∞—Ä—ã</th>
                <th>–û–±—â–∞—è —Å—É–º–º–∞</th>
                <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
                <tr>
                    <td>{{ order.id }}</td>
                    <td>{{ order.date }}</td>
                    <td>{{ order.time }}</td>
                    <td>{{ order.room_number }}</td>
                    <td>{{ order.comments }}</td>
                    <td>
                        <ul>
                            {% for item in order.items %}
                                <li>
                                    <strong>{{ item.name }}</strong> (x{{ item.quantity }}) - <span class="price">{{ item.price }} ‚ÇΩ</span>
                                </li>
                            {% endfor %}
                        </ul>
                    </td>
                    <td class="total-price">{{ order.total_price }} ‚ÇΩ</td>
                    <td>{{ order.created_at|date:"d.m.Y H:i" }}</td>
                    <td class="status">{{ order.get_status_display }}</td>
                    <td>
                        {% if order.status == "new" %}
                        <form action="{% url 'confirm_order' shop.website_url order.id %}" method="post" class="confirm-form">

                            {% csrf_token %}
                            <input type="hidden" name="shop" value="{{ shop.website_url }}">
                            <select name="employee" required class="styled-select">
                                <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                                {% for employee in employees %}
                                    <option value="{{ employee.id }}">{{ employee.full_name }}</option>
                                {% endfor %}
                            </select>
                            <button type="submit" class="confirm-btn">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                        </form>
                        
                        
                        
                        {% else %}
                            <span class="confirmed-status">‚úÖ –í —Ä–∞–±–æ—Ç–µ</span>
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="11" class="no-orders">–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}